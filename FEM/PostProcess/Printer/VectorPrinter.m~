classdef VectorPrinter < FieldPrinter ...
                       & NodalFieldPrinter
    
   
    properties (Access = protected)
        fieldType = 'Vector';
    end      
    
    properties (Access = private)
        fieldComponentName
        ndim = 2;
    end
    
    methods (Access = public)
        
        function obj = VectorPrinter(d)
            obj.init(d);
            obj.print();   
        end
    end
    
    methods (Access = protected)
        
        function init(obj,d)
            fieldsNames = fieldnames(d);
            for ifield = 1:length(fieldsNames)
                ifieldName = fieldsNames{ifield};
                fieldValue = d.(ifieldName);
                obj.(fieldsNames{ifield}) = fieldValue;
            end
        end
        
        function print(obj)
            obj.printResultsLineHeader();
            obj.printComponentNamesLine();
            obj.printValuesLine();
            obj.printFieldLines();
            obj.printEndValuesLine();
        end
        
        function printFieldLines(obj)
            iD = obj.fileID;
            fV = obj.fieldValues;
            d = obj.ndim;
            nnode = round(length(fV)/d);
            nodes(:,1) = 1:nnode;
            fieldV = zeros(nnode,d);
            for inode = 1:d
                dofs = d*(nodes-1)+inode;
                fieldV(:,inode) = fV(dofs);
            end
            pformat = '%6.0f %12.5d %12.5d \n';
            printV  = [nodes, fieldV]';
            fprintf(iD,pformat,printV);
        end
        
        function compute
            
        end
        
        function printComponentNamesLine(obj)
            iD = obj.fileID;
            fC = obj.fieldComponentName;
            d = obj.ndim;
            switch d
                case 2
                    fprintf(iD,'ComponentNames  "%sx", "%sy"\n',fC,fC);
                case 3
                    fprintf(iD,'ComponentNames "%sx", "%sy", "%sz"\n',fC,fC,fC);
            end
        end
        
    end
    
end

