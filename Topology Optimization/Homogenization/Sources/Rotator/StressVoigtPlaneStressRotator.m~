classdef StressVoigtPlaneStressRotator < Rotator
    
    properties (Access = protected)
        rotatedTensor
        rotationMatrix
    end
    
    methods (Access = public)
        
        function obj = StressVoigtPlaneStressRotator(tensor,angle,dir)
            obj.init(tensor,angle,dir)
            obj.generateRotator()
            obj.computeRotation()
        end
        
    end
    
    methods (Access = private)
        function generateRotator(obj)
            t = obj.tensor;
            a = obj.angle;
            d = obj.dir;
            rotatorVoigt3D = StressVoigtRotator(t,a,d);
            rot = rotatorVoigt3D.getRotationMatrix();
            obj.rotationMatrix = obj.makeItPlaneStress(rot);
        end
        
        function r = makeItPlaneStress(obj,rotation3D)
            PSIndex = PlaneStressIndex();
            index(:,1) = PSIndex.getInPlaneIndex();
            r = rotation3D(index,index);
        end
        
        function computeRotation(obj,tensor)
            R = obj.rotationMatrix;
            s = obj.tensor.getValue();
            obj.rotatedTensor = R*s;
        end
        
    end
    
    
end

